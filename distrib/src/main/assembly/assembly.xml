<assembly
    xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>bin</id>
    <formats>
        <format>zip</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>

    <dependencySets>
        <dependencySet>
            <outputDirectory>/lib</outputDirectory>
            <unpack>false</unpack>
            <scope>runtime</scope>
            <includes>
                <include>org.apache.commons:commons-lang3</include>
                <include>commons-logging:commons-logging</include>
                <include>commons-collections:commons-collections</include>                
                <include>javax.security.jacc:javax.security.jacc-api</include>
                <include>org.jboss.portal.common:common-common</include>
                <include>org.jboss.portal.common:common-portal</include>
                <include>javax.activation:activation</include>
                <include>javax.ccpp:ccpp</include>
                <include>javax.portlet:portlet-api</include>
                <include>log4j:log4j</include>
                <include>dom4j:dom4j</include>    
                <include>org.jboss.portal.portlet:portlet-portlet</include>
                <include>org.jboss.portal.web:web-web</include>                
                <include>xerces:xercesImpl</include>  
                <include>xml-apis:xml-apis</include>  
                <include>xml-resolver:xml-resolver</include>  
                <include>taglibs:standard</include>  
                <include>javax.transaction:jta</include>  
                <include>org.osivia.portal.api:osivia-portal-api-common:jar:${project.version}</include>
                <include>org.osivia.portal.api:osivia-portal-api-cms:jar:${project.version}</include>
                <include>org.osivia.portal.kernel:osivia-portal-kernel-jbp-lib:jar:${project.version}</include>
                <include>org.osivia.portal.kernel.tomcat:osivia-portal-tomcat-lib:jar:${project.version}</include>
                <include>org.springframework:spring-aop</include>
                <include>org.springframework:spring-beans</include>
                <include>org.springframework:spring-context</include>
                <include>org.springframework:spring-core</include>
                <include>org.springframework:spring-expression</include>
                <include>org.springframework:spring-web</include>
                <include>org.springframework:spring-aop</include>                
                <include>org.springframework:spring-webmvc</include>
                <include>org.springframework:spring-webmvc-portlet</include>                
                <include>org.springframework.security:spring-security-core</include>
                <include>org.springframework.security:spring-security-web</include>              
                <include>org.springframework.security:spring-security-config</include>              
                <include>org.springframework.security:spring-security-taglibs</include>              
                <include>org.springframework.security.oauth:spring-security-oauth2</include>                     
                 <!-- Rest services --> 
                <include>org.apache.httpcomponents:httpclient</include>
                <include>org.apache.httpcomponents:httpcore</include>
                <include>com.fasterxml.jackson.core:jackson-core:jar:${jackson.version}</include>     
                <include>com.fasterxml.jackson.core:jackson-databind:jar:${jackson.version}</include>                    
                <include>com.fasterxml.jackson.core:jackson-annotations:jar:${jackson.version}</include>                  
                <include>javax.servlet:jstl</include>
                <include>javax.mail:mail</include>                
             </includes>
        </dependencySet>  
        <dependencySet>
            <outputDirectory>/webapps</outputDirectory>
            <unpack>false</unpack>
            <scope>runtime</scope>
 			<includes>
                <include>org.osivia.portal.portlets:osivia-portal-portlets-sample:war:${project.version}</include>
                 <include>org.osivia.portal.portlets:osivia-portal-portlets-react:war:${project.version}</include>
                <include>org.osivia.portal.portlets:osivia-portal-portlets-cms:war:${project.version}</include>
                <include>org.osivia.portal.themes:osivia-portal-themes-generic:war:${project.version}</include>
                <include>org.osivia.portal.ws:osivia-portal-ws:war:${project.version}</include>
             </includes>           
        </dependencySet> 
        <dependencySet>
            <outputDirectory>/webapps</outputDirectory>
            <unpack>false</unpack>
            <scope>runtime</scope>
 			<includes>
                <include>org.osivia.portal.kernel.tomcat:osivia-portal-tomcat-web:war:${project.version}</include>
             </includes>
             <outputFileNameMapping>portal.war</outputFileNameMapping>       
        </dependencySet>   
        <dependencySet>
            <outputDirectory>/webapps</outputDirectory>
            <unpack>false</unpack>
            <scope>runtime</scope>
 			<includes>
                <include>org.osivia.portal.kernel.tomcat:osivia-portal-tomcat-assets:war:${project.version}</include>
             </includes>
             <outputFileNameMapping>portal-assets.war</outputFileNameMapping>       
        </dependencySet>           
    </dependencySets>

    <fileSets>
		<fileSet>
		    <directory>logs</directory>
		</fileSet>    
		<fileSet>
			<outputDirectory>/</outputDirectory>
			<directory>src/main/resources</directory>
      		<excludes>
        		<exclude>webapp/samples-remotecontroller-portlet.war.remove_ext</exclude>
      		</excludes>			
		</fileSet>		
     </fileSets>
	  <files>
	    <file>
	      <source>src/main/resources/webapps/samples-remotecontroller-portlet.war.remove_ext</source>
	      <outputDirectory>/webapps</outputDirectory>
		  <destName>samples-remotecontroller-portlet.war</destName>
	    </file>
	  </files>     

</assembly>
